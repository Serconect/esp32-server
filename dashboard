@app.route('/dashboard')
def dashboard():
    conn = sqlite3.connect('datos.db')
    c = conn.cursor()
    c.execute('SELECT timestamp, temperatura, humedad, vibracion FROM registros ORDER BY timestamp DESC LIMIT 20')
    rows = c.fetchall()
    conn.close()

    rows.reverse()  # Para mostrar en orden cronol√≥gico

    labels = [r[0][11:19] for r in rows]  # Solo hora
    temp = [r[1] for r in rows]
    hum = [r[2] for r in rows]
    vib = [r[3] for r in rows]

    return render_template("dashboard.html", labels=labels, temp=temp, hum=hum, vib=vib)
